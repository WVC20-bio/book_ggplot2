
# Introduction: Let's talk about R and RStudio {#about-R}

In this chapter, we will explore the R programming language and its development environment, RStudio. R has been specifically designed to perform statistical analysis, generate high-quality graphics, and efficiently handle large data sets. RStudio acts as a user-friendly interface that enhances working with R by integrating key tools such as a code editor, graphics viewer, and package management system, among other features. We will also discuss how to prepare your documents so they can be easily shared and replicated using RMarkdown. Reproducibility is a fundamental pillar of data science.

## R

R is a __programming language__, well known to most scientists. As a programming language, we can generate instructions through codes, depending on the interest of the project that person is working on (@vega_r_nodate;@peng_r_2014). 
\index{R programming language}

What makes R renowned? And how does it stand apart from other programming languages? Presently, R is compatible with nearly all computer platforms, owing to its distinct attributes:

- Free access (thanks to the General Public license of [GNU](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html))
- Large variety of _packages_ that perform multiple functions, for example, __ggplot2__.
- Supports various data types __homogeneous__(list, data frame) and __heterogeneous__(vector, matrix, array).
- It is not that "hard" to learn R, beginners can acquire proficiency by executing basic __scripts__ (text files with the **.R** extension).
- Due to its accessibility, it facilitates the exchange of scripts, so you can interact with people on the Internet and solve your problems when executing your scripts.

## RStudio
It's an integrated development environment (`IDE`), that allows to use of R language, with an interactive interface for the user [@wickham23]. 
\index{R programming language!RStudio}

## Installation of R and RStudio

You can install R on multiple available platforms, including Windows, Mac OS X and Linux operating systems. First, you must go to **CRAN**^[https://cloud.r-project.org/] (The Comprehensive R Archive Network) and choose which of the aforementioned systems you are going to download it on.

- Widows: https://cran.r-project.org/bin/windows/base/
- Mac OS X: https://cran.r-project.org/bin/macosx/
- Linux: https://cran.r-project.org/bin/linux/

CRAN is an online repository that is made up of a series of web servers, and this is where the R base versions and their packages are located [@peng_r_2014].

If you have managed to download R, when you open the program you will have an image like the Figure \@ref(fig:base) 

```{r base, echo = FALSE,message=FALSE,dpi=600,fig.cap= "R is a free programming language used by many researchers.", fig.align='center',out.width='80%', fig.width= 6, fig.height= 4}
library(knitr)
knitr::include_graphics(rep("images/rbase-fig-2.png"))
```

Then you must download and install RStudio from their [web site](https://posit.co/download/rstudio-desktop/). When we start RStudio, it will automatically detect R and we can use it normally.

The RStudio environment is the same as the one in Figure \@ref(fig:studio) , which consists of three windows. The left window contain the __console__; the upper right window contains the __workspace__ , there we find the environment containing your variables, as well as the __history__; finally, at the bottom right is the __output__ , where we find files, as well as __plots__, __packages__, among others. 

```{r studio, echo = FALSE,message=FALSE,dpi=600, fig.cap= "RStudio interface. R consists of three windows which are the console, workspace, and output.", fig.align='center', out.width='80%', fig.width= 6, fig.height= 4}
library(knitr)
knitr::include_graphics(rep("images/rstudio-fig-3.png"))
```

## Installation of R packages

Packages provide __extra functions__ to R. An R package consists of a set of files containing specific functions intended to solve a particular task. 
\index{R programming language!packages}

During the first week of June 2024, the [CRAN](https://cloud.r-project.org/) package repository had 20,828 official packages. This wide variety of packages is one of the keys to R's success.

To install packages, we can use the RStudio interface or the R console. In the first way, select the __Packages__ tab of the __Output__ window and then click on __install__. A new window will appear where you can enter the name of the package you want to install, in this example we will install the ggplot2 package (Figure \@ref(fig:install)).  After installation, we must execute the `library()` function with the package name as argument. This will allow us to use the functions of that package. 

```{r install, echo = FALSE,message=FALSE,dpi=600, fig.cap= "Installing packages in the RStudio interface", fig.align='center', out.width='80%', fig.width= 6, fig.height= 4}
knitr::include_graphics(rep("images/library-fig-3.png"))
```

It is important to remember that every time you start a session in R, you must load the packages using the `library()` function, even if you have already installed them previously. This saves memory and improves program performance.

The second way, is faster and you need to use the function `install.packages()` giving as argument the name of the package we want to install, between quotation marks. 

```{r, echo=TRUE, warning=FALSE, error=FALSE,eval=FALSE}

# Install package from CRAN

install.packages("ggplot2")

library(ggplot2)

# Install a package from GitHub 

if(!require(devtools)) 
install.packages("devtools")

library(devtools)

devtools::install_github("tidyverse/ggplot2")

# Installing a package from Bioconductor
install.packages("BiocManager")
BiocManager::install("RTCGA.clinical",update = FALSE)

```

We can also install R packages from other web repositories, the most popular being GitHub and Bioconductor. For GitHub you must first install and upload the __devtools__ package, available on CRAN. Then use the `install_github` function with “account_name/repository_name” as argument to install the desired package.

It should be noted that installing packages from CRAN offers a greater guarantee of stability and reliability. This is because the packages available on this platform undergo an initial review process and are continuously evaluated in different versions of R, which reduces the probability of errors or compatibility problems.

In contrast, **GitHub** has established itself as a fundamental platform for collaborative development, allowing open source projects to be stored, shared and managed. However, many of the packages hosted there are in the active development phase, which means that, when installing them, the user must trust both the quality of the package and the changes implemented by its author, which have not necessarily been subjected to exhaustive verification processes. 

[GitHub](https://github.com/) runs on a version control system known as git, which allows precise and detailed tracking of all modifications made to a project's files. Thanks to this functionality, many developers choose to host their packages on both CRAN and GitHub. In the latter, the code can be continuously updated, which favors a more agile maintenance and a constant evolution of the package, allowing improvements to be implemented or bugs to be corrected immediately. \index{GitHub}

On the other hand, [Bioconductor](https://www.bioconductor.org/) is an open source and collaborative development software initiative, specifically designed for the analysis and interpretation of genomic data using the R language [@Sepulveda2020]. First, you need to install the **BiocManager** package, which acts as an installation manager within the Bioconductor ecosystem. Then, the `BiocManager::install()` function is used to install the desired package, such as "RTCGA.clinical". In addition, it is possible to prevent other system packages from being automatically updated by adding the argument update = FALSE during installation. \index{Bioconductor}

## Import data

Importing data is often the first challenge faced by a beginner in R. This programming language offers several functions for importing data in different file formats. However, we will focus on reading data in `.csv` and `.xlsx` formats. \index{R programming language!import data}

### R Scripts

We are going to import a CSV file using the `read.csv()` base function. The `file` argument allows us to select the file from our desktop, the `header` argument indicates whether the first row of the dataset contains the variable names, and the `sep=","` argument specifies the delimiter that separates the data. \index{R programming language!import data!scripts}

```{r, echo=TRUE, warning=FALSE, error=FALSE}

synesthesia <- read.csv(file = "data/Chapter02/synesthetes.csv", 
              header = TRUE,  sep=",")

```

The bit that says `_book/data/synesthetes.csv` directs R to the appropriate folder. Using the __/__ sign, we can navigate to the folder where the file is located. In addition, pressing the __Tab__ key opens a dynamic window that displays the folders and files on your computer.

```{r, echo=TRUE, warning=FALSE, error=FALSE}
library(readxl)
iris_sample <- read_xlsx(path ="data/Chapter02/sample.xlsx", 
              col_names = TRUE,  sheet = "iris")

```

Next, we will import an XLSX data. To read this Excel file we will use the __readxl__ package. With the path argument we place the address of the data, the col_names argument allows us to place the name of the variable of the first row of our data and the sheet argument is to specify the workbook, in this case it is called `iris`. 

```{block2, more, type='rmdtip'}

__Want to know more?__

- Another way to use the installation interface is to click on __Tools__ in the menu, and then select the option __Install Packages__, and the same window will appear.

- You can also create CSV files with the `read_csv` function of the __readr__ package.

```

### Using RStudio

We will import the previous data (sample.xlsx) using the program interface. \index{R programming language!import data!interface}

There are two ways to import your data: through the __workspace__ window and the __file__ tab (Figure \@ref(fig:import)). In both places, you will find the option to import data sets. When you select it, a pop-up box will open. Next, select the file in Excel format, which will generate a new window showing its dimensions. Then locate the file on your desktop and finally import the data.

```{r import, echo = FALSE, fig.cap= "Importing data with RStudio", fig.align='center', out.width='90%', fig.width= 6, fig.height= 4}
knitr::include_graphics(rep("images/import.png"))
```

## Preparation of reproducible documents by R Markdown {#reproducible}

From this chapter onwards, and in the following chapters, you will find three key elements: code blocks, generated results and explanatory annotations. \index{R Markdown}

The code blocks allow you to import, organize and visualize your data. You can run them directly in the RStudio console (identified by the `>` symbol) to obtain immediate results, such as tables or graphs. However, these commands are lost when you log out. To keep them, it is advisable to save them in a script file with `.R` extension, where you can also include comments explaining each step. These comments begin with the `#` symbol. It is important to note that, although scripts allow you to save the code and its annotations, they do not store the results obtained.


(ref:rmd) Structure of an RMarkdown file. It consists of three parts: the header, the Markdown content, and R code chunks.

```{r rmd, echo = FALSE,warning=FALSE, message=FALSE,dpi=600,fig.cap= '(ref:rmd)', fig.align='center',out.width='80%', fig.width= 6, fig.height= 4}
knitr::include_graphics(rep("images/Rmd.png"))
```


Is it possible to combine code, results and annotations in a single document? The answer is yes, and the tool to achieve this is called **RMarkdown**. This type of file, with `.Rmd` extension, allows to integrate R code together with explanatory text in the same environment. When compiled, it generates a dynamic document -such as HTML, PDF, Word, among others- that includes both the analysis and its interpretation. This transformation process, known as knitting, combines the code fragments (known as *chunks*) with the text, creating a cohesive, reproducible and easy-to-share report.
 
Let's go a little deeper into the use of RMarkdown. To begin, we will create a new file from RStudio, accessing the menu `File > New File > R Markdown`. This will open a pop-up window where you can specify the output format of the document (HTML, PDF, Word, among others), as well as add a title and the author's name.

The generated file will include a basic example that briefly explains how RMarkdown works and will be divided into three main sections: the header; the content written in Markdown syntax; and the R code blocks, known as *chunks* (Figure \@ref(fig:rmd)).

- **The header**: This section, written in [YAML](https://en.wikipedia.org/wiki/YAML) format, includes the document's metadata, i.e. key information that defines both the characteristics of the file and instructions on how it should be interpreted and rendered. Essential elements typically include the document title, author's name, creation date and the desired output format, such as HTML, PDF or Word.

```yaml
title: "Learning RMarkdown"
author: "William Vilchez"
date: "2025-04-18"
output: html_document
```

- **The Markdown content**: It consists of the text or notes below the header. This text is written in Markdown syntax, here is an example from the file we generated:

```markdown

# R Markdown

## What is R Markdown?

This is an R Markdown document. 
**Markdown** is a simple *formatting* syntax 
for authoring HTML, PDF, and MS Word documents. 
For more details on using R Markdown 
see <http://rmarkdown.rstudio.com>.

```

You can place numbered section headings after the pound sign (`#`). In addition, certain words may be `**bold**` or `*italics*`.

- **R code chunks**: Throughout the file you can include code snippets and they have the following format: 

````markdown
`r ''````{r}

```
````
Three slashes or quotation marks ```` ``` ```` , but with an additional `{r}` immediately after the initial set of quotation marks. The code axing generates me: text, table or figure output. For more information, see the R Markdown documentation (https://bookdown.org/yihui/rmarkdown/).


## In conclusion 

One of the strengths of the R language is the wide range of tools available for manipulating and visualizing data, many of which exist thanks to functions developed by the community and shared free of charge in the form of “packages”. During your learning process with this language, you will work primarily with three components: code snippets, results generated by code execution and text annotations. These elements can be integrated into a single file through the use of R Markdown, allowing you to create reproducible documents in different formats (PDF, HTML).

If you feel that you still need more time to become familiar with R, I suggest that you consult Appendix \@ref(more) at the end of the book, where you will find complementary information that could help you when programming in R.

